<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      NodeJs 是什么 | 博客
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/new-blog/assets/style.0144dabd.css">
    <link rel="modulepreload" href="/new-blog/assets/Home.9104efd7.js">
    <link rel="modulepreload" href="/new-blog/assets/app.138650f0.js">
    <link rel="modulepreload" href="/new-blog/assets/base_nodejs.md.fe920272.lean.js">
    <link rel="modulepreload" href="/new-blog/assets/app.138650f0.js">
    
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-6e7c0b86><div class="sidebar-button" data-v-6e7c0b86><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/new-blog/" aria-label="博客, back to home" data-v-6e7c0b86 data-v-00c3af85><!----> 博客</a><div class="flex-grow" data-v-6e7c0b86></div><div class="nav" data-v-6e7c0b86><nav class="nav-links" data-v-6e7c0b86 data-v-f465d38e><!--[--><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/english/base" data-v-98431d6e>英语 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/algorithm/index" data-v-98431d6e>算法 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/helper/command" data-v-98431d6e>工具助手 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item isExternal" href="https://github.com/MaxPeak" target="_blank" rel="noopener noreferrer" data-v-98431d6e>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-98431d6e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-58e261f2><nav class="nav-links nav" data-v-58e261f2 data-v-f465d38e><!--[--><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/english/base" data-v-98431d6e>英语 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/algorithm/index" data-v-98431d6e>算法 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/helper/command" data-v-98431d6e>工具助手 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item isExternal" href="https://github.com/MaxPeak" target="_blank" rel="noopener noreferrer" data-v-98431d6e>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-98431d6e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-58e261f2><!--[--><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#nodejs-是什么" data-v-58e261f2>NodeJs 是什么</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#优点" data-v-58e261f2>优点</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#缺点" data-v-58e261f2>缺点</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#事件循环" data-v-58e261f2>事件循环</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#libuv-引擎的-6-个阶段" data-v-58e261f2>libuv 引擎的 6 个阶段</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#宏任务（macrotask）" data-v-58e261f2>宏任务（macrotask）</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#微任务（microtask）" data-v-58e261f2>微任务（microtask）</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#其他" data-v-58e261f2>其他</a><!----></li></ul></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#模块机制" data-v-58e261f2>模块机制</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#导入" data-v-58e261f2>导入</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#导出" data-v-58e261f2>导出</a><!----></li></ul></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#npm" data-v-58e261f2>npm</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#常用指令" data-v-58e261f2>常用指令</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#上传包" data-v-58e261f2>上传包</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#更新包" data-v-58e261f2>更新包</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#删除包" data-v-58e261f2>删除包</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#npx" data-v-58e261f2>npx</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#npm-init" data-v-58e261f2>npm init</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#如何写脚手架" data-v-58e261f2>如何写脚手架</a><!----></li></ul></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#常用的几个全局变量" data-v-58e261f2>常用的几个全局变量</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-b109f666><div class="container" data-v-b109f666><!--[--><!--]--><div class="content" data-v-b109f666><div data-v-b109f666><h2 id="nodejs-是什么"><a class="header-anchor" href="#nodejs-是什么" aria-hidden="true">#</a> NodeJs 是什么</h2><ul><li>它是一个 Javascript 运行环境</li><li>依赖于 Chrome V8 引擎进行代码解释</li><li>事件驱动</li><li>非阻塞 I/O</li><li>轻量、可伸缩，适于实时数据交互应用</li><li>单进程，单线程</li></ul><h2 id="优点"><a class="header-anchor" href="#优点" aria-hidden="true">#</a> 优点</h2><ul><li>高并发（最重要的优点）</li><li>适合 I/O 密集型应用</li></ul><h2 id="缺点"><a class="header-anchor" href="#缺点" aria-hidden="true">#</a> 缺点</h2><ul><li>不适合 CPU 密集型应用</li><li>只支持单核 CPU，不能充分利用 CPU</li></ul><h2 id="事件循环"><a class="header-anchor" href="#事件循环" aria-hidden="true">#</a> 事件循环</h2><p>node11 之前运行机制不同于<a href="./js.html#事件循环">浏览器环境</a></p><h3 id="libuv-引擎的-6-个阶段"><a class="header-anchor" href="#libuv-引擎的-6-个阶段" aria-hidden="true">#</a> libuv 引擎的 6 个阶段</h3><ul><li>timers 阶段：这个阶段执行 timer（setTimeout、setInterval）的回调</li><li>I/O callbacks 阶段：处理一些上一轮循环中的少数未执行的 I/O 回调</li><li>idle, prepare 阶段：仅 node 内部使用</li><li>poll 阶段：获取新的 I/O 事件, 适当的条件下 node 将阻塞在这里</li><li>check 阶段：执行 setImmediate() 的回调</li><li>close callbacks 阶段：执行 socket 的 close 事件回调</li></ul><h3 id="宏任务（macrotask）"><a class="header-anchor" href="#宏任务（macrotask）" aria-hidden="true">#</a> 宏任务（macrotask）</h3><ul><li>script 整体代码</li><li>setTimeout/setInterval</li><li>setImmediate</li><li>I/O 操作</li></ul><h3 id="微任务（microtask）"><a class="header-anchor" href="#微任务（microtask）" aria-hidden="true">#</a> 微任务（microtask）</h3><ul><li>process.nextTick</li><li>promise</li></ul><h3 id="其他"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><ul><li>process.nextTick 独立在 event loop 之外，它有自己的队列，它优先于微任务队列</li><li>执行时机：microtask 在事件循环的各个阶段之间执行</li><li>node11 之后执行时机和浏览器一致了！</li></ul><h2 id="模块机制"><a class="header-anchor" href="#模块机制" aria-hidden="true">#</a> 模块机制</h2><p>导出导出遵从 CommonJS 规范（运行时加载）</p><h3 id="导入"><a class="header-anchor" href="#导入" aria-hidden="true">#</a> 导入</h3><div class="language-js"><pre><code><span class="token comment">// 运行时执行</span>
<span class="token comment">// 导出的可以是任何的 js 数据类型</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="导出"><a class="header-anchor" href="#导出" aria-hidden="true">#</a> 导出</h3><div class="language-js"><pre><code><span class="token comment">// 导出的值会被缓存</span>
<span class="token comment">// 导出的是一个值得拷贝</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// export和module.exports的区别</span>
<span class="token comment">// require执行寻找的是其他模块的module.exports这个属性，值默认为{}</span>
<span class="token comment">// exports是module.exports这个属性的简写形式，相当于global.exports = module.exports(对象引用关系)</span>
<span class="token comment">// 所以在导出时用exports简写形式时不能直接等号赋值，只能用.去扩展，而用module.exports可以直接等号赋值也可以用.扩展</span>
<span class="token comment">// 大多数情况建议用module.exports，这样会减少不必要的麻烦</span>
</code></pre></div><h2 id="npm"><a class="header-anchor" href="#npm" aria-hidden="true">#</a> npm</h2><h3 id="常用指令"><a class="header-anchor" href="#常用指令" aria-hidden="true">#</a> 常用指令</h3><ul><li><code>-g</code> 全局安装</li><li><code>--save</code> 安装的模块在 dependencies 里面 (简写 npm -S)</li><li><code>--save-dev</code> 安装的模块在 devDependencies 里面(简写 npm -D)</li><li><code>-y</code> 默认全部确定，一般在 init 的时候使用</li><li><code>npm init</code> 初始化项目环境</li><li><code>npm install</code> 下载安装模块 (简写 npm i)</li><li><code>npm uninstall</code> 删除模块</li></ul><h3 id="上传包"><a class="header-anchor" href="#上传包" aria-hidden="true">#</a> 上传包</h3><p>在 npm 官网需要有一个账号</p><ul><li><p>在本地创建模块文件夹</p></li><li><p>初始化项目环境 <code>npm init</code></p></li><li><p>编写代码</p></li><li><p>修改<code>package.json</code>文件</p><ul><li>name:包名字（起名时不要有与 npm 里面有重复）</li><li>version：包版本，x.x.x 的格式，符合语义化版本规则</li><li>description：描述信息</li><li>bin：执行脚本的软连接，写脚手架需要用到</li><li>main：项目入口地址（CommonJS 规范）</li><li>module：项目入口地址（es6 规范）</li><li>types：ts 类型文件申明</li><li>scripts：指定了运行脚本命令的 npm 命令行缩写，默认是空的 test</li><li>keywords：包的关键词，便于 npm 检索</li><li>author：作者信息，一般提供 github 地址</li><li>license: 许可证，默认是 ISC、有的默认是 MIT</li><li>files：包含在项目中的文件(夹)数组，可以声明一个.gitignore 来忽略部分文件</li><li>repository：项目代码仓库地址</li><li>homepage: 项目主页 url，（包的官网）</li><li>config：字段用于添加命令行的环境变量</li><li>dependencies：在生产环境中需要用到的依赖</li><li>devDependencies：在开发、测试环境中用到的依赖</li></ul></li><li><p>在控制台输入 <code>npm login</code> 进行登录（用户名，密码，邮箱）</p></li><li><p>上传你的模块 <code>npm publish</code></p></li></ul><h3 id="更新包"><a class="header-anchor" href="#更新包" aria-hidden="true">#</a> 更新包</h3><ul><li>修改<code>package.json</code>的版本号</li><li>上传你的模块 <code>npm publish</code></li></ul><h3 id="删除包"><a class="header-anchor" href="#删除包" aria-hidden="true">#</a> 删除包</h3><ul><li><code>npm unpublish -f</code> 包名</li></ul><h3 id="npx"><a class="header-anchor" href="#npx" aria-hidden="true">#</a> npx</h3><p>npm5.2 之后新增了 npx 命令，其目的是为了避免全局安装一些模块，比如 create-react-app，以前使用需要-g 全局安装，使用 npx 模块就不需要全局安装，直接<code>npx create-react-app projectName</code>就可以了，在执行 npx 的时候，会将 create-react-app 下载到一个临时目录，使用以后再删除，这样既能保持本地全局模块的干净，也能保证每次都是最新的 cli 版本</p><ul><li><code>npx @vue/cli create projectName</code></li><li><code>npx create-react-app projectName</code></li></ul><h3 id="npm-init"><a class="header-anchor" href="#npm-init" aria-hidden="true">#</a> npm init</h3><p>npm6.1 之后增加的一个更加方便得快捷使用 cli 的命令，简单来说就是你执行 <code>npm init thinkjs</code> 的话 npm 会补全模块名为 <code>create-thinkjs</code> 并执行 <code>npx create-thinkjs</code>，vite 就是这样做的，<code>npm init @vitejs/app projectName</code>相当于<code>npx create-vite-app projectName</code></p><h3 id="如何写脚手架"><a class="header-anchor" href="#如何写脚手架" aria-hidden="true">#</a> 如何写脚手架</h3><div class="language-json"><pre><code><span class="token comment">// package.json</span>
<span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin/vue.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// bin/vue.js</span>

<span class="token comment">// 这句话必须加，为了保证不同电脑的node路径一致，并且必须是文件开头第一行</span>
#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node

<span class="token comment">// code...</span>
</code></pre></div><h2 id="常用的几个全局变量"><a class="header-anchor" href="#常用的几个全局变量" aria-hidden="true">#</a> 常用的几个全局变量</h2><ul><li>__dirname：当前执行脚本所在目录</li><li>__filename：当前执行脚本的文件名</li><li>process：进程状态对象 <ul><li>process.argv：命令行参数集合</li><li>process.<wbr>env：环境变量</li></ul></li></ul></div></div><footer class="page-footer" data-v-b109f666 data-v-5a019cc9><div class="edit" data-v-5a019cc9><div class="edit-link" data-v-5a019cc9 data-v-fb0131f2><!----></div></div><div class="updated" data-v-5a019cc9><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"416064e1\",\"algorithm_index.md\":\"98d57d91\",\"base_algorithm.md\":\"c602a7d9\",\"base_browser.md\":\"f410b083\",\"base_compilation.md\":\"43b7bd21\",\"base_css.md\":\"47803b64\",\"base_data-structure.md\":\"d90760ac\",\"base_design-pattern.md\":\"af4b4071\",\"base_development.md\":\"134f8193\",\"base_engineered.md\":\"e754711b\",\"base_framework.md\":\"6780042f\",\"base_html.md\":\"9a26d3a2\",\"base_http.md\":\"c8aa38f6\",\"base_js.md\":\"d50fb6ad\",\"base_model.md\":\"4d0d1377\",\"base_nodejs.md\":\"fe920272\",\"base_optimize.md\":\"6d7767f9\",\"base_paradigm.md\":\"7ec0f8b4\",\"base_regxep.md\":\"f1b862fe\",\"base_security.md\":\"6c7c3e8d\",\"english_base.md\":\"602feb70\",\"helper_command.md\":\"0bb8bd50\"}")</script>
    <script type="module" async src="/new-blog/assets/app.138650f0.js"></script>
  </body>
</html>