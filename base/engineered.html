<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      webpack | 博客
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/new-blog/assets/style.0144dabd.css">
    <link rel="modulepreload" href="/new-blog/assets/Home.a5873d38.js">
    <link rel="modulepreload" href="/new-blog/assets/app.7ac1b5c9.js">
    <link rel="modulepreload" href="/new-blog/assets/base_engineered.md.f765bb6f.lean.js">
    <link rel="modulepreload" href="/new-blog/assets/app.7ac1b5c9.js">
    
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-6e7c0b86><div class="sidebar-button" data-v-6e7c0b86><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/new-blog/" aria-label="博客, back to home" data-v-6e7c0b86 data-v-00c3af85><!----> 博客</a><div class="flex-grow" data-v-6e7c0b86></div><div class="nav" data-v-6e7c0b86><nav class="nav-links" data-v-6e7c0b86 data-v-f465d38e><!--[--><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/english/base" data-v-98431d6e>英语 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/algorithm/index" data-v-98431d6e>算法 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/helper/command" data-v-98431d6e>工具助手 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item isExternal" href="https://github.com/MaxPeak" target="_blank" rel="noopener noreferrer" data-v-98431d6e>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-98431d6e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-58e261f2><nav class="nav-links nav" data-v-58e261f2 data-v-f465d38e><!--[--><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/english/base" data-v-98431d6e>英语 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/algorithm/index" data-v-98431d6e>算法 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item" href="/new-blog/helper/command" data-v-98431d6e>工具助手 <!----></a></div></div><div class="item" data-v-f465d38e><div class="nav-link" data-v-f465d38e data-v-98431d6e><a class="item isExternal" href="https://github.com/MaxPeak" target="_blank" rel="noopener noreferrer" data-v-98431d6e>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-98431d6e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-58e261f2><!--[--><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#webpack" data-v-58e261f2>webpack</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#entry" data-v-58e261f2>entry</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#output" data-v-58e261f2>output</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#loader" data-v-58e261f2>loader</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#plugins" data-v-58e261f2>plugins</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#demo" data-v-58e261f2>demo</a><!----></li></ul></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#docker" data-v-58e261f2>docker</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#与传统虚拟机之前的区别" data-v-58e261f2>与传统虚拟机之前的区别</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#核心概念" data-v-58e261f2>核心概念</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#dockerfile" data-v-58e261f2>Dockerfile</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#总结" data-v-58e261f2>总结</a><!----></li></ul></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#nginx" data-v-58e261f2>nginx</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#git" data-v-58e261f2>git</a><ul class="sidebar-links" data-v-58e261f2><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#工作流" data-v-58e261f2>工作流</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#提交规范" data-v-58e261f2>提交规范</a><!----></li><li class="sidebar-link" data-v-58e261f2 data-v-58e261f2><a class="sidebar-link-item" href="#gitignore" data-v-58e261f2>gitignore</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-b109f666><div class="container" data-v-b109f666><!--[--><!--]--><div class="content" data-v-b109f666><div data-v-b109f666><h2 id="webpack"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> webpack</h2><h3 id="entry"><a class="header-anchor" href="#entry" aria-hidden="true">#</a> entry</h3><div class="language-js"><pre><code><span class="token comment">// 程序入口</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 常规写法</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// webpack 会创建过个主入口，然后把他们一起注入到一个&quot;chunk&quot;</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;path1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;path2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 常用于多页开发</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token string">&quot;path&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="output"><a class="header-anchor" href="#output" aria-hidden="true">#</a> output</h3><div class="language-js"><pre><code><span class="token comment">// 程序输入</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 常规写法</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span> filename<span class="token operator">:</span> <span class="token string">&quot;filename&quot;</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">&quot;path&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 配合entry常用于多页开发</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/dist&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="loader"><a class="header-anchor" href="#loader" aria-hidden="true">#</a> loader</h3><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// loader主要用于把webpack不认识的文件类型转换成能认识的类型</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// test 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件</span>
      <span class="token comment">// use 属性，表示进行转换时，应该使用哪个 loader</span>
      <span class="token comment">// options 属性，用于一些配置参数</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">&quot;ts-loader&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="plugins"><a class="header-anchor" href="#plugins" aria-hidden="true">#</a> plugins</h3><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// plugins主要用于loader无法实现的其他事，插件会经历整个完整的webpack生命周期，这也是webpack的主要功能</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/app.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="demo"><a class="header-anchor" href="#demo" aria-hidden="true">#</a> demo</h3><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vue-loader/lib/plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 程序入口</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/app.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 代码调试</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;inline-source-map&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 开发环境</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// devServer配置</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// gzip压缩</span>
    host<span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ip 方便局域网其他同事访问</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 热更新</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 解决启动后刷新404</span>
    port<span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token comment">// 端口</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 插件</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 复制模板html把打包后的js、css添加到html中</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// devServer默认读取这个文件</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/app.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 解析路径，查找模块的时候使用</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 一般写模块不会写后缀，在这里配置好相应的后缀，那么当我们不写后缀时，会按照这个后缀优先查找</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 路径别名</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@pages&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/pages&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@components&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/components&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@routes&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/routes.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@images&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/images&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// enforce:pre表示这个loader要在别的loader执行前执行</span>
        enforce<span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;source-map-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;cache-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;thread-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;vue-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                preserveWhitespace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 后缀名为js的文件用babel管理</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// cacheDirectory是用来缓存编译结果，下次编译加速</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;babel-loader?cacheDirectory=true&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 后缀名为css的文件用style-loader/css-loader管理</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 后缀名为png|jpg|gif的文件用url-loader管理</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 小于等于10k的图片转换成base64直接插入html中，减少http请求</span>
              limit<span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 后缀名为woff|woff2|eot|ttf|otf的文件用file-loader管理</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="docker"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> docker</h2><p>docker 是基于 go 语言实现的，解决了运行环境和配置问题的软件容器，方便做持续集成并有助于整体发布的容器虚拟技术</p><h3 id="与传统虚拟机之前的区别"><a class="header-anchor" href="#与传统虚拟机之前的区别" aria-hidden="true">#</a> 与传统虚拟机之前的区别</h3><ul><li>传统虚拟机：包含一整套完整的操作系统，过于庞大，且启动时间慢(分钟级)</li><li>容器虚拟技术：不用包含一整套完整的操作系统，而是对进程进行隔离，只需要将软件运行所需要的所有资源打包到一个隔离的容器中即可，更轻量，更快(秒级)</li></ul><h3 id="核心概念"><a class="header-anchor" href="#核心概念" aria-hidden="true">#</a> 核心概念</h3><ul><li>仓库：仓库是存放镜像的场所，仓库分为公开仓库和私有仓库，最大的公开仓库是 Docker Hub，国内的公开仓库包括阿里云，网易云等</li><li>镜像：镜像就像是面向对象中的类，是一个<strong>只读</strong>的</li><li>容器：容器就是镜像的实例，每个容器相互独立相互隔离，它可以被启动、开始、停止、删除</li></ul><h3 id="dockerfile"><a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a> Dockerfile</h3><p>Dockerfile 是用来描述文件的构成的文本文档，其中包含了用户可以在使用行调用以组合 Image 的所有命令，用户还可以使用 Docker build 实现连续执行多个命令指今行的自动构建。通过编写 Dockerfile 生磁镜像，可以为开发、测试团队提供基本一致的环境，从而提升开发、测试团队的效率，不用再为环境不统一而发愁，同时运维也能更加方便地管理我们的镜像。</p><h4 id="常用语法"><a class="header-anchor" href="#常用语法" aria-hidden="true">#</a> 常用语法</h4><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>FROM</td><td>基于那个镜像来实现</td></tr><tr><td>MAINTAINER</td><td>镜像的创建者</td></tr><tr><td>ENV</td><td>声明环境变量</td></tr><tr><td>RUN</td><td>执行的命令</td></tr><tr><td>ADD</td><td>添加宿主机文件到容器里，有需要解压的文件会自动解压</td></tr><tr><td>COPY</td><td>添加宿主机文件到容器里</td></tr><tr><td>WORKDIR</td><td>工作目录</td></tr><tr><td>EXPOSE</td><td>容器内应用可使用的端口</td></tr><tr><td>CMD</td><td>容器启动后所执行的程序，如果执行 docker run 后面跟启动命令会被覆盖掉</td></tr><tr><td>ENTRYPOINT</td><td>与 CMD 功能相同，但需要 docker run 不会覆盖，如果过需要覆盖可增加参数-entrypoint 来覆盖</td></tr><tr><td>VOLUME</td><td>将宿主机的目录挂载到容器里</td></tr></tbody></table><h4 id="编写优雅地-dockerfile"><a class="header-anchor" href="#编写优雅地-dockerfile" aria-hidden="true">#</a> 编写优雅地 Dockerfile</h4><ul><li>Dockerfile 文件不宜过长，层级越多最终制作出来的镜像也就越大。</li><li>构建出来的镜像不要包含不需要的内容，如日志、安装临时文件等。</li><li>尽量使用运行时的基础镜像，不需要将构建时的过程也放到运行时的 Dockerfile 里</li></ul><h4 id="dockerignore-文件"><a class="header-anchor" href="#dockerignore-文件" aria-hidden="true">#</a> dockerignore 文件</h4><div class="language-dockerignore"><pre><code>**/node_modules
**/dist
</code></pre></div><h4 id="demo-2"><a class="header-anchor" href="#demo-2" aria-hidden="true">#</a> demo</h4><div class="language-Dockerfile"><pre><code><span class="token keyword">FROM</span> node<span class="token punctuation">:</span>10
<span class="token keyword">COPY</span> ./ /app
<span class="token keyword">WORKDIR</span> /app
<span class="token keyword">RUN</span> npm install &amp;&amp; npm run build

<span class="token keyword">FROM</span> nginx
<span class="token keyword">RUN</span> mkdir /app
<span class="token keyword">COPY</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>from=0 /app/dist /app
<span class="token keyword">COPY</span> nginx.conf /etc/nginx/nginx.conf
</code></pre></div><h3 id="总结"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>Docker 本身就是一个容器运行载体或者称之为管理引擎。我们把应用程序和配置依赖打包成一个可交付的运行环境，这个打包好的运行环境就是镜像文件(image)。只有通过这个镜像文件才能生成容器(container)。镜像可以看做是容器的模板。docker 通过镜像生成容器的实例。同一个镜像文件可以生成多个同时运行的容器实例。</p><ul><li>镜像文件生成容器实例，镜像文件本身也是一个文件</li><li>一个容器运行一种服务，需要的时候通过 docker 客户端创建一个对应的运行实例，也就是我们的容器</li><li>仓库就是存放了一堆镜像的地方，我们可以把镜像发布到仓库，需要的时候从仓库拉取下来使用</li></ul><h2 id="nginx"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h2><p>Nginx 是一个高效可靠的 web 服务和代理中间件，负载均衡和反向代理是最常用的功能，如果是 history 模式的单页应用，也会用它进行路由的重定向处理</p><div class="language-nginx"><pre><code><span class="token comment"># 每个指令必须有分号结束</span>

<span class="token comment"># 配置用户或者组，默认为nobody</span>
<span class="token keyword">user</span>  nginx<span class="token punctuation">;</span>
<span class="token comment"># 允许生成的进程数</span>
<span class="token keyword">worker_processes</span>  <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment"># 指定日志级别</span>
<span class="token keyword">error_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log warn<span class="token punctuation">;</span>
<span class="token comment"># 指定nginx进程运行文件存放地址</span>
<span class="token keyword">pid</span>        <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span><span class="token punctuation">;</span>
<span class="token comment"># events块：配置影响nginx服务器或与用户的网络连接。有每个进程的最大连接数，选取哪种事件驱动模型处理连接请求，是否允许同时接受多个网路连接，开启多个网络连接序列化等</span>
<span class="token keyword">events</span> <span class="token punctuation">{</span>
  <span class="token comment"># 最大连接数，默认为512</span>
  <span class="token keyword">worker_connections</span>  <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment"># http块：可以嵌套多个server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。如文件引入，mime-type定义，日志自定义，是否使用sendfile传输文件，连接超时时间，单连接请求数等</span>
<span class="token keyword">http</span> <span class="token punctuation">{</span>
  <span class="token comment"># 文件扩展名与文件类型映射表</span>
  <span class="token keyword">include</span>       <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>mime<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">;</span>
  <span class="token comment"># 默认文件类型，默认为text/plain</span>
  <span class="token keyword">default_type</span>  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>
  <span class="token keyword">log_format</span>  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span>
                    <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span>
                    <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span>
  <span class="token comment"># 服务日志</span>
  <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>
  <span class="token comment"># 允许sendfile方式传输文件，默认为off，可以在http块，server块，location块</span>
  <span class="token keyword">sendfile</span>        on<span class="token punctuation">;</span>
  <span class="token comment"># 每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限</span>
  <span class="token keyword">sendfile_max_chunk</span> <span class="token number">100</span>k<span class="token punctuation">;</span>
  <span class="token comment"># 连接超时时间，默认为75s，可以在http，server，location块</span>
  <span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span><span class="token punctuation">;</span>
  <span class="token comment"># server块：配置虚拟主机的相关参数，一个http中可以有多个server</span>
  <span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token comment"># 单连接请求上限次数</span>
    <span class="token keyword">keepalive_requests</span> <span class="token number">120</span><span class="token punctuation">;</span>
    <span class="token comment"># 监听端口</span>
    <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token comment"># 服务域名</span>
    <span class="token comment"># 支持多域名配置</span>
    <span class="token keyword">server_name</span> www<span class="token punctuation">.</span>barretlee<span class="token punctuation">.</span>com barretlee<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
    <span class="token comment"># 支持泛域名解析</span>
    <span class="token keyword">server_name</span> <span class="token operator">*</span><span class="token punctuation">.</span>barretlee<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
    <span class="token comment"># 支持对于域名的正则匹配</span>
    <span class="token keyword">server_name</span> <span class="token operator">~</span><span class="token operator">^</span>\<span class="token punctuation">.</span>barret\<span class="token punctuation">.</span>com$<span class="token punctuation">;</span>
    <span class="token keyword">server_name</span>  localhost<span class="token punctuation">;</span>
    <span class="token comment"># location块：配置请求的路由，以及各种页面的处理情况</span>
    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
      <span class="token comment"># 根目录</span>
      <span class="token keyword">root</span>   <span class="token operator">/</span>app<span class="token punctuation">;</span>
      <span class="token comment"># 设置默认页</span>
      <span class="token keyword">index</span>  <span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
      <span class="token comment"># history模式的单页应用重定向</span>
      <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 错误页</span>
    <span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
      <span class="token keyword">root</span>   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># URI匹配</span>
    <span class="token comment"># 完全匹配  =</span>
    <span class="token comment"># 大小写敏感 ~</span>
    <span class="token comment"># 忽略大小写 ~*</span>
    <span class="token comment"># 前半部分匹配 ^~</span>
    <span class="token comment"># 可以使用正则，如：location ~* \.(gif|jpg|png)$ { }</span>
    <span class="token comment"># 如果以上都未匹配，会进入 /</span>
    <span class="token keyword">location</span>  <span class="token operator">~</span><span class="token operator">*</span><span class="token operator">^</span><span class="token punctuation">.</span><span class="token operator">+</span>$ <span class="token punctuation">{</span>
      <span class="token comment"># 请求转向mysvr 定义的服务器列表</span>
      <span class="token keyword">proxy_pass</span>  <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>mysvr<span class="token punctuation">;</span>
      <span class="token comment"># 拒绝的ip</span>
      <span class="token keyword">deny</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">;</span>
      <span class="token comment"># 允许的ip</span>
      <span class="token keyword">allow</span> <span class="token number">172.18</span><span class="token number">.5</span><span class="token number">.54</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="git"><a class="header-anchor" href="#git" aria-hidden="true">#</a> git</h2><p>git 是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。</p><p><a href="/helper/command.html#git">常用指令</a></p><h3 id="工作流"><a class="header-anchor" href="#工作流" aria-hidden="true">#</a> 工作流</h3><p>git 工作流：又叫分支管理策略，目的是解决多人开发中的诸多问题，例如版本迭代、bug 修复、新功能添加等，从而更好的管理项目代码，工作流不涉及任何指令，只是一个规则</p><h4 id="主要分支"><a class="header-anchor" href="#主要分支" aria-hidden="true">#</a> 主要分支</h4><ul><li>master：master 分支永远都是发布状态，只用于发布代码</li><li>develop：develop 分支保持最新的开发进度</li></ul><h4 id="协助分支"><a class="header-anchor" href="#协助分支" aria-hidden="true">#</a> 协助分支</h4><ul><li>feature：主要用于做功能开发和常规 bug 修复</li><li>release：主要用于做预发布版本，所有的测试在这个分支上进行，测试出现的问题直接在这个分支上修改</li><li>hotfix：主要用于线上紧急 bug 修复</li></ul><h3 id="提交规范"><a class="header-anchor" href="#提交规范" aria-hidden="true">#</a> 提交规范</h3><p>目的是规范提交信息，方便团队其他成员阅读，也方便自动生成 CHANGELOG 文件</p><h4 id="格式"><a class="header-anchor" href="#格式" aria-hidden="true">#</a> 格式</h4><ul><li><p>Header</p><ul><li><p>type(必须)</p><ul><li>feat:新功能</li><li>fix:修补 bug</li><li>docs:修改文档，如 README 等</li><li>style:修改空格，缩进等不改变代码逻辑的变动</li><li>refactor:重构代码</li><li>test:测试用例</li><li>chore:构建过程或者辅助工具的变动</li><li>revert:回滚版本，撤销以前某个 commit，后面跟上被撤销 commit 的 Header</li><li>ci:更改了 CI 配置或者脚本</li><li>perf:优化相关，比如优化性能或者开发体验</li></ul></li><li><p>scope:用于说明 commit 影响的范围，可选值。通常是文件、路径、功能等</p></li><li><p>subject:commit 目的的简短描述。不超过 50 个字符</p></li></ul></li><li><p>Body:commit 的详细描述</p></li><li><p>Footer</p><ul><li>Break Changes: 不兼容变动；BREAKING CHANGE 开头，后面是对变动的描述、以及变动理由和迁移方法</li><li>Closes： 关闭 Issue；如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue；如： Closes #123, #245, #992</li></ul></li></ul><h3 id="gitignore"><a class="header-anchor" href="#gitignore" aria-hidden="true">#</a> gitignore</h3><p>不需要纳入 git 版本控制的文件或目录可以在 .gitignore 文件中定义</p><div class="language-gitignore"><pre><code><span class="token comment">#               表示此为注释,将被Git忽略</span>
<span class="token entry string"><span class="token operator">*</span>.a             表示忽略所有 .a 结尾的文件</span>
<span class="token entry string"><span class="token punctuation">/</span>TODO           表示仅仅忽略项目根目录下的 TODO 文件，不包括 subdir<span class="token punctuation">/</span>TODO</span>
<span class="token entry string">build<span class="token punctuation">/</span>          表示忽略 build<span class="token punctuation">/</span>目录下的所有文件，过滤整个build文件夹；</span>
<span class="token entry string">doc<span class="token punctuation">/</span><span class="token operator">*</span>.txt       表示会忽略doc<span class="token punctuation">/</span>notes.txt但不包括 doc<span class="token punctuation">/</span>server<span class="token punctuation">/</span>arch.txt</span>

<span class="token entry string">bin<span class="token punctuation">/</span>:           表示忽略当前路径下的bin文件夹，该文件夹下的所有内容都会被忽略，不忽略 bin 文件</span>
<span class="token entry string"><span class="token punctuation">/</span>bin:           表示忽略根目录下的bin文件</span>
<span class="token entry string"><span class="token punctuation">/</span><span class="token operator">*</span>.c:           表示忽略cat.c，不忽略 build<span class="token punctuation">/</span>cat.c</span>
<span class="token entry string"><span class="token operator">**</span><span class="token punctuation">/</span>foo:         表示忽略<span class="token punctuation">/</span>foo,a<span class="token punctuation">/</span>foo,a<span class="token punctuation">/</span>b<span class="token punctuation">/</span>foo等</span>
<span class="token entry string">a<span class="token punctuation">/</span><span class="token operator">**</span><span class="token punctuation">/</span>b:         表示忽略a<span class="token punctuation">/</span>b, a<span class="token punctuation">/</span>x<span class="token punctuation">/</span>b,a<span class="token punctuation">/</span>x<span class="token punctuation">/</span>y<span class="token punctuation">/</span>b等</span>
<span class="token entry string"><span class="token operator">!</span><span class="token punctuation">/</span>bin<span class="token punctuation">/</span>run.sh    表示不忽略bin目录下的run.sh文件</span>
<span class="token entry string"><span class="token operator">*</span>.log:          表示忽略所有 .log 文件</span>
<span class="token entry string">config.php:     表示忽略当前路径的 config.php 文件</span>

<span class="token entry string"><span class="token punctuation">/</span>mtk<span class="token punctuation">/</span>           表示过滤整个文件夹</span>
<span class="token entry string"><span class="token punctuation">/</span>mtk<span class="token punctuation">/</span>do.c       表示过滤某个具体文件</span>
</code></pre></div></div></div><footer class="page-footer" data-v-b109f666 data-v-5a019cc9><div class="edit" data-v-5a019cc9><div class="edit-link" data-v-5a019cc9 data-v-fb0131f2><!----></div></div><div class="updated" data-v-5a019cc9><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"9e734238\",\"algorithm_index.md\":\"e3e5e5f3\",\"base_algorithm.md\":\"17b23528\",\"base_browser.md\":\"9071c8ee\",\"base_css.md\":\"5e9ef1db\",\"base_data-structure.md\":\"99b9256a\",\"base_design-pattern.md\":\"50aa9563\",\"base_development.md\":\"10fc3c1d\",\"base_engineered.md\":\"f765bb6f\",\"base_framework.md\":\"3e0d992b\",\"base_html.md\":\"ad5fbcdc\",\"base_http.md\":\"5f4f9372\",\"base_js.md\":\"b233e647\",\"base_model.md\":\"544202e1\",\"base_nodejs.md\":\"9b8cbce2\",\"base_optimize.md\":\"96c26b5f\",\"base_paradigm.md\":\"cdfb01b6\",\"base_regxep.md\":\"70e1adee\",\"base_security.md\":\"640741d6\",\"english_base.md\":\"86a766b1\",\"english_notes.md\":\"51cd9ab1\",\"helper_command.md\":\"8b51f92e\"}")</script>
    <script type="module" async src="/new-blog/assets/app.7ac1b5c9.js"></script>
  </body>
</html>